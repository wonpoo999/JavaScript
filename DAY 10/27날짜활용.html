<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ìš°ë¦¬ íœì…˜ ì˜ˆì•½</title>
  <style>
    body {
      padding: 30px;
      font-family: sans-serif;
    }
    #priceInfo {
      margin-bottom: 10px;
      font-weight: bold;
      color: darkgreen;
    }
    #totalCost {
      margin-top: 10px;
      font-size: 18px;
      color: darkred;
    }
  </style>
</head>
<body>
  <h3>ìš°ë¦¬ íœì…˜ì— ì˜¨ ê²ƒì„ í™˜ì˜í•˜ì˜¤, ë‚®ì„  ì´ì—¬. ë‚˜ëŠ” ì´ íœì…˜ì˜ ê¹¨ìš°ì¹œ ì£¼ì¸, ì¢…ì„¸ì´ì˜¤.</h3>
  <hr />
  
  <div>
    <label for="enterDate">ì…ì‹¤ë‚ ì§œ: </label>
    <input type="date" id="enterDate" />
  </div>

  <div id="priceInfo">ğŸ’° 1ë°•ë‹¹ ìˆ™ë°•ë¹„: ê³„ì‚° ì¤‘...</div>

  <div>
    <label for="nights">ìˆ™ë°•ì¼ìˆ˜: </label>
    <input type="number" id="nights" min="1" max="10000000" value="1" placeholder="ìˆ™ë°•ì¼ìˆ˜ ì…ë ¥">
  </div>

  <div>
    <label for="outDate">í‡´ì‹¤ë‚ ì§œ: </label>
    <input type="date" id="outDate" />
  </div>

  <div id="totalCost">ğŸ’µ ì´ ìˆ™ë°•ìš”ê¸ˆ: ê³„ì‚° ì¤‘...</div>

  <script>
    // ìƒìˆ˜ ì •ì˜
    const BASE_PRICE = 400000;
    const BASE_DAYS = 30;

    // 100ì› ë‹¨ìœ„ ë°˜ì˜¬ë¦¼ í•¨ìˆ˜
    function roundToNearest100(amount) {
      return Math.round(amount / 100) * 100;
    }

    const ONE_DAY_PRICE = roundToNearest100(BASE_PRICE / BASE_DAYS);

    // ìš”ì†Œ ê°€ì ¸ì˜¤ê¸°
    const enterDate = document.getElementById('enterDate');
    const nights = document.getElementById('nights');
    const outDate = document.getElementById('outDate');
    const priceInfo = document.getElementById('priceInfo');
    const totalCost = document.getElementById('totalCost');

    // ë‚ ì§œ í¬ë§· í•¨ìˆ˜: yyyy-MM-dd
    function dateInputFmt(vdate) {
      const year = vdate.getFullYear();
      const month = (vdate.getMonth() + 1).toString().padStart(2, '0');
      const date = vdate.getDate().toString().padStart(2, '0');
      return [year, month, date].join('-');
    }

    // ì˜¤ëŠ˜ ë‚ ì§œ ì„¤ì •
    const today = new Date();
    enterDate.value = dateInputFmt(today);
    enterDate.min = dateInputFmt(today);

    // 1ë°•ë‹¹ ìˆ™ë°•ë¹„ í‘œì‹œ
    priceInfo.textContent = `ğŸ’° 1ë°•ë‹¹ ìˆ™ë°•ë¹„: ${ONE_DAY_PRICE.toLocaleString()}ì›`;

    // í‡´ì‹¤ ë‚ ì§œ ë° ì´ ìˆ™ë°•ë¹„ ê³„ì‚°
    function updateCalculation() {
      const days = parseInt(nights.value);
      if (!enterDate.value || isNaN(days) || days < 1) return;

      const inDate = new Date(enterDate.value);
      inDate.setDate(inDate.getDate() + days);
      outDate.value = dateInputFmt(inDate);

      const total = ONE_DAY_PRICE * days;
      totalCost.textContent = `ğŸ’µ ì´ ìˆ™ë°•ìš”ê¸ˆ: ${total.toLocaleString()}ì›`;
    }

    // ì´ë²¤íŠ¸ ì—°ê²°
    nights.addEventListener('input', updateCalculation);
    enterDate.addEventListener('change', updateCalculation);

    // í˜ì´ì§€ ë¡œë”© ì‹œ ê³„ì‚° 1íšŒ ì‹¤í–‰
    updateCalculation();
  </script>
</body>
</html>
    